---
layout: default
---

{% include base_path %}

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% endif %}

{% if page.url != "/" and site.breadcrumbs %}
  {% unless paginator %}
    {% include breadcrumbs.html %}
  {% endunless %}
{% endif %}

<style>
/* Hide the inline Kramdown TOC â€” we move it to the sidebar via JS */
#markdown-toc { display: none; }

/* Algorithm box styles */
.algo-container { display: flex; gap: 2em; margin: 2em 0; }
.algo-container .algo-box { flex: 1; min-width: 0; }
.algo-box {
  border: none; border-top: 2px solid #000; border-bottom: 2px solid #000;
  padding: 0.8em 0; margin: 1.5em 0; background: transparent;
  font-family: "Computer Modern", "Latin Modern", "STIX Two Text", Georgia, "Times New Roman", serif;
  font-size: 0.93em; line-height: 1.7;
}
.algo-box .algo-title { font-weight: 700; font-size: 1em; margin-bottom: 0.3em; padding-bottom: 0.3em; border-bottom: 1px solid #000; }
.algo-box .algo-io { margin: 0.2em 0; padding-left: 0.5em; }
.algo-box .algo-io strong { font-weight: 700; font-variant: small-caps; font-size: 1.05em; }
.algo-box ol { margin: 0.3em 0 0.5em 0; padding-left: 2.2em; list-style-type: decimal; }
.algo-box ol li { margin-bottom: 0.1em; padding-left: 0.3em; }
.algo-box .algo-cost { padding-left: 0.5em; margin-top: 0.4em; padding-top: 0.3em; border-top: 1px solid #000; }
.algo-box .algo-cost strong { font-weight: 700; font-variant: small-caps; font-size: 1.05em; }
@media (max-width: 768px) { .algo-container { flex-direction: column; } }
</style>

<div id="main" role="main" class="blog-post-main">
  {% include sidebar-toc.html %}

  <article class="page" itemscope itemtype="http://schema.org/BlogPosting">
    {% if page.title %}<meta itemprop="headline" content="{{ page.title | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
    {% if page.excerpt %}<meta itemprop="description" content="{{ page.excerpt | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
    {% if page.date %}<meta itemprop="datePublished" content="{{ page.date | date: "%B %d, %Y" }}">{% endif %}

    <div class="page__inner-wrap">
      {% unless page.header.overlay_color or page.header.overlay_image %}
        <header>
          {% if page.title %}<h1 class="page__title" itemprop="headline">{{ page.title | markdownify | remove: "<p>" | remove: "</p>" }}</h1>{% endif %}
          {% if page.date %}
            <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Created:</strong> <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>{% if page.last_modified_at %} | <strong>Last modified:</strong> <time datetime="{{ page.last_modified_at | date_to_xmlschema }}">{{ page.last_modified_at | date: "%B %d, %Y" }}</time>{% endif %}</p>
          {% endif %}
          {% if page.read_time %}
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> {% include read-time.html %}</p>
          {% endif %}
        </header>
      {% endunless %}

      <section class="page__content" itemprop="text">
        {{ content }}
      </section>

      <footer class="page__meta">
        {% if site.data.ui-text[site.locale].meta_label %}
          <h4 class="page__meta-title">{{ site.data.ui-text[site.locale].meta_label }}</h4>
        {% endif %}
        {% include page__taxonomy.html %}
      </footer>

      {% if page.share %}{% include social-share.html %}{% endif %}
    </div>
  </article>
</div>

<script>
(function() {
  var tocList = document.getElementById("toc-list");
  var sidebarToc = document.querySelector(".sidebar-toc");
  if (!tocList || !sidebarToc) return;

  // Strategy 1: Use Kramdown-generated TOC if available
  var kramdownToc = document.getElementById("markdown-toc");
  if (kramdownToc) {
    tocList.innerHTML = kramdownToc.innerHTML;
  } else {
    // Strategy 2: Build TOC from headings
    var content = document.querySelector(".page__content");
    if (!content) return;
    var headings = content.querySelectorAll("h2, h3");
    if (headings.length === 0) {
      sidebarToc.style.display = "none";
      return;
    }
    var currentH2Item = null;
    var currentSubList = null;
    headings.forEach(function(heading) {
      if (!heading.id) {
        heading.id = heading.textContent.trim().toLowerCase()
          .replace(/[^\w\s-]/g, "").replace(/\s+/g, "-");
      }
      var li = document.createElement("li");
      var a = document.createElement("a");
      a.href = "#" + heading.id;
      a.textContent = heading.textContent;
      if (heading.tagName === "H2") {
        li.appendChild(a);
        tocList.appendChild(li);
        currentH2Item = li;
        currentSubList = null;
      } else if (heading.tagName === "H3") {
        if (!currentSubList) {
          currentSubList = document.createElement("ul");
          currentSubList.className = "toc__sub-menu";
          if (currentH2Item) {
            currentH2Item.appendChild(currentSubList);
          } else {
            var wrapLi = document.createElement("li");
            wrapLi.appendChild(currentSubList);
            tocList.appendChild(wrapLi);
          }
        }
        li.appendChild(a);
        currentSubList.appendChild(li);
      }
    });
  }

  // Hide sidebar if TOC is empty
  if (tocList.children.length === 0) {
    sidebarToc.style.display = "none";
    return;
  }

  // Style sub-menus from Kramdown TOC
  var subMenus = tocList.querySelectorAll("ul");
  subMenus.forEach(function(ul) { ul.className = "toc__sub-menu"; });

  // Scroll spy
  var tocLinks = tocList.querySelectorAll("a");
  var content = document.querySelector(".page__content");
  var headingElements = content ? Array.from(content.querySelectorAll("h2, h3")) : [];

  function updateActiveToc() {
    var scrollPos = window.scrollY + 80;
    var activeIndex = -1;
    for (var i = headingElements.length - 1; i >= 0; i--) {
      if (headingElements[i].offsetTop <= scrollPos) {
        activeIndex = i;
        break;
      }
    }
    tocLinks.forEach(function(link) { link.classList.remove("active"); });
    if (activeIndex >= 0) {
      var activeId = headingElements[activeIndex].id;
      tocLinks.forEach(function(link) {
        if (link.getAttribute("href") === "#" + activeId) {
          link.classList.add("active");
        }
      });
    }
  }

  window.addEventListener("scroll", updateActiveToc);
  updateActiveToc();
})();
</script>
